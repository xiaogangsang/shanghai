<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <link rel="icon" href="images/favicon.ico" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>搜索热词管理</title>
  <link rel="stylesheet" href="css/bootstrap.min.css">
  <link rel="stylesheet" href="css/reset.css">
  <link rel="stylesheet" href="css/banner.css">
</head>
<body>

  @@include('component/header.tpl')

  <div class="container-fluid">

    <div class="row">

      @@include('component/sidebar.tpl')

      <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

        <ol class="breadcrumb">
          <li>搜索</li>
          <li class="active">搜索热词管理&热词配置</li>
        </ol>

        <form id="formSearch" class="search-area clearfix">
          <div class="form-group col-sm-6 col-md-4 col-lg-4">
            <div class="input-group">
              <div class="input-group-addon">搜索词</div>
              <input type="text" class="form-control" id="search_searchTerm">
            </div>
          </div>

          <div class="form-group col-sm-6 col-md-4 col-lg-4">
            <div class="input-group">
              <div class="input-group-addon">城市</div>
              <select class="form-control" id="search_cityId">
                <option value="">全部</option>
              </select>
            </div>
          </div>

          <div class="form-group col-sm-6 col-md-4 col-lg-4">
            <div class="input-group">
              <div class="input-group-addon">渠道</div>
              <select class="form-control" id="search_channel" source-map-key="channel">

              </select>
            </div>
          </div>

          <div class="form-group col-sm-6 col-md-4 col-lg-4">
            <div class="input-group">
              <div class="input-group-addon">是否为热搜词</div>
              <select class="form-control" id="search_type" source-map-key="searchTermType">
              </select>
            </div>
          </div>

          <div class="form-group col-sm-6 col-md-4 col-lg-4">
            <div class="input-group">
              <div class="input-group-addon">生效时间</div>
              <input type="text" class="form-control" id="search_startTime">
            </div>
          </div>

          <div class="form-group col-sm-6 col-md-4 col-lg-4">
            <div class="input-group">
              <div class="input-group-addon">至</div>
              <input type="text" class="form-control" id="search_endTime">
            </div>
          </div>

          <div class="col-xs-12 col-sm-6 col-md-4 pull-right">
            <div class="row">
              <div class="col-sm-6">
                <button type="submit" class="btn btn-block btn-primary">查询</button>
              </div>
              <div class="col-sm-6">
                <button type="button" class="btn btn-block btn-default btn-create">新增</button>
              </div>
            </div>
          </div>
        </form>

        <div class="content-area">

          <div class="row" id="pager"></div>

          <div class="table-responsive" id="dataTable">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>搜索词</th>
                  <th>搜索次数</th>
                  <th>类型</th>
                  <th>渠道</th>
                  <th>展示顺序</th>
                  <th>生效时间</th>
                  <th width="100">操作</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td colspan="9" align="center">请点击“查询”按钮！</td>
                   </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script src="js/vendor.js"></script>
  <script src="lib/jquery.quicksearch.min.js"></script>
  <script src="js/search.js"></script>

  <script id="pager-template" type="text/x-tmpl-mustache">
    <div class="col xs-12 col-sm-6 rowStatics">共 <span id="total">{{total}}</span> 条数据，当前显示 <span id="rowsSize">{{rowsSize}}</span> 条</div>
    {{#pageTotal}}
    <div class="col xs-12 col-sm-6">
      <nav>
        <ul class="pagination pagination-sm">
          <li><a href="#" class="prev"><span>&lt;</span></a></li>
          <li><span id="pageIndex">{{pageIndex}}</span> / <span id="pageTotal">{{pageTotal}}</span></li>
          <li><a href="#" class="next"><span>&gt;</span></a></li>
          <li><input type="number" name="pageNo" id="pageNo" pattern="[0-9]+"></li>
          <li><button type="button" class="btn" id="btn-pager">跳转</button></li>
        </ul>
      </nav>
    </div>
    {{/pageTotal}}
  </script>
  <script id="table-template" type="text/x-tmpl-mustache">
    {{#rows}}
    <tr data-id="{{id}}" data-bannertype="{{bannerType}}">
      <td>{{id}}</td>
      <td>{{searchTerm}}</td>
      <td>{{searchCount}}</td>
      <td>{{util.searchTermType.parse(type)}}</td>
      <td>{{util.channel.parse(channel)}}</td>
      <td>{{orderNo}}</td>>
      <td>{{startTime}} - {{endTime}}</td>
      <td>
        <button type="button" class="btn btn-xs btn-default btn-edit">编辑</button>
      </td>
    </tr>
    {{/rows}}
  </script>

  <script id="edit-template" type="text/x-tmpl-mustache">
    <input type="hidden" id="id" value="{{term.id}}">
    <div class="table-responsive">
      <table class="table">
        <tbody>
          <tr>
            <th>搜索词</th>
            <td><input type="text" class="form-control" id="searchTerm" value="{{term.searchTerm}}" {{term.id ? 'disabled': ''}} required></td>
          </tr>
          <tr>
            <th>类型</th>
            <td>
            {{util.searchTermType.radiosHTML('type', term.type == undefined ? 2 : term.type)}}
            </td>
          </tr>

          <tr class="hide-if-not-popular">
            <th>区域类型</th>
            <td>
            {{util.areaType.radiosHTML('areaType', (term.city && term.city != 9999 ? 2 : 1))}}
            </td>
          </tr>

          <tr style="display:none;" class="hide-if-not-popular">
            <th><button type="button" class="btn btn-default" id="btn-city">选择城市</button></th>
            <td>点击左侧按钮查看/选择城市</td>
          </tr>

          <tr class="hide-if-not-popular">
            <th>渠道</th>
            <td>
            {{util.channel.radiosHTML('channel', term.channel ? term.channel : 1)}}
            </td>
          </tr>
          
          <tr class="hide-if-not-popular">
            <th>跳转链接</th>
            <td><input type="text" class="form-control" id="link" value="{{term.link}}" ></td>
          </tr>

          <tr class="hide-if-not-popular">
            <th>显示顺序</th>
            <td>
              <select class="form-control" id="order">
                {{var dict = {}; for (var i = 1; i <= 6; ++i) {dict[i] = i;} (new Codec(dict)).optionsHTML(false, term.orderNo);}}
              </select>
            </td>
          </tr>
          
          <tr class="hide-if-not-popular">
            <th>生效日期</th>
            <td>
              <input type="text" class="form-control" style="display:inline-block;width:auto;" id="startTime" value="{{term.startTime}}" size="10" required data-parsley-errors-container="#error-date" readonly> - <input type="text" class="form-control" style="display:inline-block;width:auto;" id="endTime" value="{{term.endTime}}" size="10" required data-parsley-errors-container="#error-date" readonly>
              <div id="error-date"></div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </script>

  <div class="modal fade" id="popup-banner-form" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog">
      <div class="modal-content">
        <form>
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            <h4 class="modal-title">编辑</h4>
          </div>
          <div class="modal-body"></div>
          <div class="modal-footer">
            <button type="submit" class="btn btn-primary">保存</button>
            <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
          </div>
        </form>
      </div>
    </div>
  </div>
  @@include('component/popup-city.tpl')
</body>
</html>
